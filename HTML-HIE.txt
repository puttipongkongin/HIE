
<html lang="en" >
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Health Info Exchange - Register & Login</title>
  <style>
    body {
      font-family: Arial, Helvetica, sans-serif;
      background-color: #f9fafb;
      margin: 0; padding: 20px; max-width: 900px; margin-left: auto; margin-right: auto;
      color: #111;
    }
    h1, h2 {
      color: #222;
    }
    label {
      font-weight: 600;
      display: block;
      margin-top: 15px;
    }
    input, select, button {
      width: 100%;
      max-width: 300px;
      padding: 10px;
      margin-top: 4px;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 1rem;
    }
    button {
      cursor: pointer;
      background-color: #2563eb;
      color: white;
      border: none;
      margin-top: 20px;
      max-width: 150px;
      transition: background-color 0.3s ease;
    }
    button:hover:not(:disabled) {
      background-color: #1e40af;
    }
    button:disabled {
      background-color: #93c5fd;
      cursor: not-allowed;
    }
    .section {
      background: white;
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 30px;
      box-shadow: 0 2px 8px rgb(0 0 0 / 0.1);
    }
    .hidden {
      display: none !important;
    }
    .error {
      color: #dc2626;
      margin-top: 5px;
      font-weight: 700;
    }
    .success {
      color: #16a34a;
      margin-top: 5px;
      font-weight: 700;
    }
    nav {
      margin-bottom: 30px;
    }
    nav button {
      margin-right: 10px;
      max-width: 140px;
    }
    table {
      border-collapse: collapse;
      width: 100%;
      max-width: 700px;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 10px;
    }
    th {
      background-color: #efefef;
    }
    ul {
      padding-left: 20px;
      margin-top: 6px;
    }
    #appointmentNotificationIcon {
      background-color: #dc2626;
      color: white;
      display: inline-block;
      padding: 4px 9px;
      border-radius: 20px;
      font-weight: 700;
      margin-left: 10px;
      user-select: none;
    }
  </style>
</head>
<body>

  <h1>Health Info Exchange</h1>

  <!-- Navigation for logged in users -->
  <nav id="nav" class="hidden" aria-label="User navigation">
    <button id="dashboardBtn">Dashboard</button>
    <button id="logoutBtn">Logout</button>
  </nav>

  <!-- Registration Page -->
  <section id="registerSection" class="section" aria-label="User Registration">
    <h2>Register</h2>
    <form id="registerForm" novalidate>
      <label for="registerUsername">Username <span aria-hidden="true" style="color:red;">*</span></label>
      <input id="registerUsername" name="username" type="text" autocomplete="username" required placeholder="e.g. johndoe" />
      <div id="registerUsernameError" class="error" role="alert" aria-live="assertive"></div>

      <label for="registerPassword">Password <span aria-hidden="true" style="color:red;">*</span></label>
      <input id="registerPassword" name="password" type="password" autocomplete="new-password" required placeholder="At least 6 characters" />
      <div id="registerPasswordError" class="error" role="alert" aria-live="assertive"></div>

      <label for="registerRole">Role <span aria-hidden="true" style="color:red;">*</span></label>
      <select id="registerRole" name="role" required aria-describedby="roleHelp">
        <option value="" disabled selected>Choose a role</option>
        <option value="patient">Patient</option>
        <option value="physician">Physician</option>
        <option value="admin">Admin</option>
      </select>
      <div id="registerRoleError" class="error" role="alert" aria-live="assertive"></div>
      <div id="roleHelp" style="font-size: 0.9rem; margin-top: 3px; color: #555;">
        If you are a physician, please provide your license number below for verification.<br />
        If you are an admin, no extra info required.
      </div>

      <div id="physicianVerificationFields" class="hidden" style="margin-top: 15px;">
        <label for="licenseNumber">License Number <span aria-hidden="true" style="color:red;">*</span></label>
        <input id="licenseNumber" name="licenseNumber" type="text" placeholder="e.g. MD123456" autocomplete="off" />
        <div id="licenseNumberError" class="error" role="alert" aria-live="assertive"></div>

        <label>
          <input type="checkbox" id="verifiedCheckbox" /> Simulate Verification (check if verified)
        </label>
      </div>

      <button type="submit" id="registerSubmitBtn">Register</button>
      <div id="registerStatus" role="alert" aria-live="assertive"></div>
    </form>

    <p style="margin-top: 15px;">
      Already have an account? 
      <button id="showLoginBtn" style="color: #2563eb; background:none; border:none; cursor:pointer; text-decoration: underline;">Login here</button>
    </p>
  </section>

  <!-- Login Page -->
  <section id="loginSection" class="section hidden" aria-label="User Login">
    <h2>Login</h2>
    <form id="loginForm" novalidate>
      <label for="loginUsername">Username</label>
      <input id="loginUsername" name="loginUsername" type="text" autocomplete="username" required placeholder="Your username" />
      <div id="loginUsernameError" class="error" role="alert" aria-live="assertive"></div>

      <label for="loginPassword">Password</label>
      <input id="loginPassword" name="loginPassword" type="password" autocomplete="current-password" required placeholder="Your password" />
      <div id="loginPasswordError" class="error" role="alert" aria-live="assertive"></div>

      <button type="submit" id="loginSubmitBtn">Login</button>
      <div id="loginStatus" role="alert" aria-live="assertive"></div>
    </form>

    <p style="margin-top: 15px;">
      Don't have an account? 
      <button id="showRegisterBtn" style="color: #2563eb; background:none; border:none; cursor:pointer; text-decoration: underline;">Register here</button>
    </p>
  </section>

  <!-- Admin Dashboard: Sanatorium Management -->
  <section id="adminDashboard" class="section hidden" aria-label="Admin Dashboard">
    <h2>Welcome, <span id="adminName"></span> (Admin)</h2>

    <h3>Register Sanatorium</h3>
    <form id="adminSanatoriumForm">
      <label for="adminSanatoriumName">Sanatorium Name</label>
      <input id="adminSanatoriumName" required placeholder="e.g. Riverside Clinic" />
      <button type="submit">Add Sanatorium</button>
      <div id="adminSanatoriumStatus" class="success" style="margin-top: 8px;"></div>
    </form>

    <h3>Registered Sanatoriums</h3>
    <table style="max-width: 500px;">
      <thead><tr><th>Name</th><th>Code</th></tr></thead>
      <tbody id="sanatoriumListAdmin"></tbody>
    </table>

    <h3 style="margin-top:2em;">Forward Patient Data</h3>
    <form id="adminForwardForm">
      <label for="adminForwardUser">Patient Username</label>
      <input id="adminForwardUser" required placeholder="e.g. johndoe" />
      <label for="adminForwardCode">Sanatorium Code</label>
      <input id="adminForwardCode" required placeholder="Paste sanatorium code"/>
      <button type="submit">Send Data</button>
      <div id="adminForwardStatus" class="success" style="margin-top:8px"></div>
    </form>
  </section>

  <!-- Patient Dashboard -->
  <section id="patientDashboard" class="section hidden" aria-label="Patient Dashboard">
    <h2>Welcome, <span id="patientName"></span> (Patient)</h2>

    <button id="patientRefreshBtn" style="max-width: 140px; margin-bottom: 15px;">Refresh Data</button>

    <h3>Your Health Data</h3>
    <div id="patientHealthData">
      <form id="patientDataForm" novalidate>
        <div style="max-width: 320px; margin-bottom: 1rem;">
          <label for="patientDob">Date of Birth <span aria-hidden="true" style="color:red;">*</span></label>
          <input id="patientDob" type="date" aria-describedby="dobHelp" required />
          <small id="dobHelp" style="color:#555; font-size: 0.9rem;">
            Select your birth date (between 150 years ago and today).
          </small>
        </div>
        <div style="max-width: 480px; margin-bottom: 1rem;">
          <label for="patientAllergies">Allergies</label>
          <input id="patientAllergies" type="text" placeholder="List any allergies (comma separated)" />
        </div>
        <button type="submit" style="max-width: 140px; margin-top: 10px;">Update Health Data</button>
        <div id="patientUpdateStatus" role="alert" aria-live="assertive" style="margin-top:8px;"></div>
      </form>
    </div>

    <hr style="margin: 2rem 0;" />

    <h3>Share Personal Data with Sanatorium (by Code)</h3>
    <form id="dataSharingForm" novalidate>
      <p style="max-width: 500px; color: #444; margin-bottom: 10px;">
        Enter the sanatorium code provided by your healthcare provider:
      </p>
      <input id="sanatoriumCodeInput" placeholder="Enter code, e.g. SNT1234" required style="max-width: 300px;" />
      <button type="submit" style="max-width: 180px;">Send Data</button>
      <div id="dataSharingStatus" role="alert" aria-live="assertive" style="margin-top:8px;"></div>
    </form>

    <hr style="margin: 2rem 0;" />

    <h3>Your Appointments</h3>
    <ul id="patientAppointmentsList" style="margin-bottom: 1.5rem;"></ul>

    <h3>Schedule New Appointment</h3>
    <form id="patientAppointmentForm" novalidate>
      <label for="patientAppointmentDate">Date <span aria-hidden="true" style="color:red;">*</span></label>
      <input id="patientAppointmentDate" type="date" required style="max-width: 180px; margin-bottom: 8px;" />

      <label for="patientAppointmentTime">Time <span aria-hidden="true" style="color:red;">*</span></label>
      <input id="patientAppointmentTime" type="time" required style="max-width: 180px; margin-bottom: 8px;" />

      <button type="submit" style="max-width: 140px; margin-top: 10px;">Schedule Appointment</button>
      <div id="patientAppointmentStatus" role="alert" aria-live="assertive" style="margin-top:8px;"></div>
    </form>
  </section>

  <!-- Physician Dashboard -->
  <section id="physicianDashboard" class="section hidden" aria-label="Physician Dashboard">
    <h2>Welcome, Dr. <span id="physicianName"></span> (Physician)</h2>
    <div id="physicianVerificationStatus" style="color:#b91c1c; font-weight:700;"></div>
    <button id="physicianRefreshBtn" style="max-width: 160px; margin-bottom: 20px;">Refresh Patient List</button>
    <h3>Patient Records</h3>
    <table aria-label="Patient records">
      <thead>
        <tr>
          <th>Patient ID</th><th>Name</th><th>DOB</th><th>Allergies</th><th>Actions</th>
        </tr>
      </thead>
      <tbody id="physicianPatientTableBody">
        <!-- Filled dynamically -->
      </tbody>
    </table>
    <div id="physicianPatientDetails" style="margin-top: 20px;" aria-live="polite"></div>
    <button id="physicianLogoutBtn" style="margin-top: 30px; background:#b91c1c;">Logout</button>
  </section>

</body>
</html>
